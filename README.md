<p align="center">
  <img src="images/icon.png" alt="Wizly logo" width="128">
</p>
 
 # Wizly ‚Äî Magic xpa Web Client Post‚ÄëProcessor

Wizly automatically post‚Äëprocesses HTML generated by Magic xpa Web Client.
Using powerful, configurable regex rules, it fixes structural and quality
issues and lets you switch to other UI frameworks if you prefer. Transformations
run right after generation when you trigger Wizly, or automatically for new files
when `autoTransformOnCreate` is enabled; you don‚Äôt need to manually edit the
generated HTML, which saves time and yields consistent, maintainable output.

Wizly is a VS Code extension that uses a project configuration file.
You can export `.vswizly.js` and keep it in version control so the
whole team applies the same rules.

## ‚ú® Features

- Regex‚Äëbased HTML post‚Äëprocessing
- Shared project config via `.vswizly.js` (version‚Äëcontrolled)
- Auto‚Äëtransform on file creation (`autoTransformOnCreate`)
- Optional info toast (`autoTransformToast`)
- Transform tag to avoid re‚Äëprocessing
- Commands: Transform current file, Transform uncommitted files, Export default config
- Works with another editor: keep VS Code open with `autoTransformOnCreate: true`; new `.html` files in the workspace transform automatically.
- Compatibility: Requires `VS Code 1.103.0+`

### Bundled Default Rules

The bundled default rules adjust Magic‚Äëgenerated HTML in several ways to improve structure, framework compatibility, and maintainability:

- Rebuild the base to use a `<form>` instead of a `<div>`
- Replace non‚Äëinput `<label>` elements with `<span>` (Magic puts default text in `<label>`, which is not per HTML guidelines)
- Remove `<div>` elements that break Material Design components
- Remove wrapper `<div>` elements around form controls
- Remove `mat-card` wrapper for subforms
- Change `<div>` with inline flex row styling to Bootstrap classes
- Replace `visibility` inline style with Bootstrap `d-none` classes (note: `display: none` does not preserve element height, `visibility: hidden` does)

Tables:
- Change `mat-table` (flex layout) to native HTML `<table>` to support better column behavior and row/col‚Äëspan capabilities
- Remove classes `container_border` and `table_row` from the table
- Use `formgroup` on `<tr>` instead of in each `<td>` (needs extra testing)

## üöÄ Usage

### Shortcuts

Use `Ctrl+Shift+P` (Windows/Linux) or `Cmd+Shift+P` (macOS) to open the command palette and type "Wizly".

### Commands

- `Wizly: Transform Current File` ‚Äî transform the active file
- `Wizly: Transform All Uncommitted Files` ‚Äî transform files changed in Git
- `Wizly: Export Default Rules to .vswizly.js` ‚Äî writes a starter `.vswizly.js` at the workspace root for team‚Äësharing (fails if the file exists)


### Creating Custom Rules

Edit the project config file directly to tailor transformations for your codebase.

Use a versioned `.vswizly.js` at the workspace root to share rules across your team. Changes are automatically reloaded. If the file is missing, Wizly uses built‚Äëin defaults.

1. Run `Wizly: Export Default Rules to .vswizly.js`
2. Open the file in the project root
3. Add, modify, or disable rules as needed
4. Save ‚Äî changes are picked up automatically

See `docs/rules.md` for advanced rule fields, rationale, and tips. For full before/after samples, see `examples/`.

## ‚öôÔ∏è Configuration

### Optional Auto Transform Settings

Use a single project config to enable optional features:

```js
module.exports = {
  autoTransformOnCreate: true,
  autoTransformToast: true, // show an info toast per new file
  transformTag: {
    enable: true,
    dateFormat: "YYYY-MM-DD",
    timeFormat: "HH:mm",
    template: "Changed by Wizly on {date} at {time}"
  },
  rules: [ /* ... */ ]
};
```

### Prettier Integration

Wizly uses Prettier to format HTML after applying regex rules.

- Bundled Prettier: the extension ships its own Prettier package, so users don‚Äôt need to install anything.
- Prefer workspace Prettier: if your project has `prettier` installed, Wizly will prefer that workspace version.
- Respect workspace config: Wizly reads your Prettier configuration (`.prettierrc`, `prettier.config.*`, or `package.json` `prettier` field) via `resolveConfig` and applies it. Team settings take precedence over the defaults.
- VS Code Prettier extension: the separate ‚ÄúPrettier‚Äù editor extension is not required for Wizly. Wizly uses its own Prettier module, but still follows your project configuration.

## Known Limitations

- Regex is not well‚Äësuited for deeply nested or recursive HTML structures. Prefer narrow, targeted patterns and consider splitting complex transforms into multiple rules.

Rules execute in order (top to bottom). Later rules run on the output of earlier rules, so order matters. Place broader patterns first and more specific ones after to get the desired result.

### Optional Transform Tag

Add a tag at the top of transformed files to avoid re‚Äëprocessing and provide an audit trail. Placeholders `{date}` and `{time}` are supported; see the configuration example above.

## üéØ Example

See `examples/` for full before/after sample. 

## ‚ÑπÔ∏è How Replace Works

See `docs/rules.md` for details on the EOF marker, named groups, and regex flags.

## üõ†Ô∏è Development

### Development Requirements

- Node.js 16+

Note: End users installing the extension do not need Node.js. Runtime compatibility is governed by `engines.vscode` in `package.json` (currently `^1.103.0`).


## üìù Changelog

See [CHANGELOG.md](./CHANGELOG.md) for the full release history.


## ü§ù Contributing

Feedback and ideas are welcome via Issues: https://github.com/SybrenVanZon/wizly-plugin/issues


## Credits

- Built for Magic xpa Web Client workflows.
 - Author: Sybren van Zon ‚Äî Magic xpa & Angular ¬∑ Wizly author & maintainer.

## Disclaimer

This extension is not affiliated with or endorsed by Magic xpa or Magic Software Enterprises. All trademarks are the property of their respective owners.

## üìÑ License

MIT License ‚Äî see `LICENSE` file for details.